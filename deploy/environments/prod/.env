# =====================================================
# Production Environment - Reference Configuration
# =====================================================
# Deployed on company K8S. See deploy/k8s/ for manifests.
# Infrastructure (PostgreSQL, Redis) is company-managed.
# This file is a reference for K8S ConfigMap/Secret values.
# DO NOT commit real credentials. Use secrets manager.
# =====================================================

# --- Environment ---
ENVIRONMENT=prod
SPRING_PROFILES_ACTIVE=prod

# --- Registry ---
REGISTRY=harbor.company.com/workflow
IMAGE_TAG=latest

# --- Database (company-managed) ---
POSTGRES_HOST=prod-postgres.internal
POSTGRES_PORT=5432
POSTGRES_DB=workflow_platform_prod
POSTGRES_USER=platform_prod
POSTGRES_PASSWORD=CHANGE_ME
# Full JDBC URL (used in K8S ConfigMap)
SPRING_DATASOURCE_URL=jdbc:postgresql://prod-postgres.internal:5432/workflow_platform_prod

# --- Redis (company-managed) ---
REDIS_HOST=prod-redis.internal
REDIS_PORT=6379
REDIS_PASSWORD=CHANGE_ME

# --- JWT (shorter expiration for production) ---
JWT_SECRET=CHANGE_ME
JWT_EXPIRATION=28800000
JWT_REFRESH_EXPIRATION=86400000

# --- Encryption ---
ENCRYPTION_SECRET_KEY=CHANGE_ME

# --- Service URLs (K8S internal service names â€” used by both backends and frontend nginx) ---
ADMIN_CENTER_URL=http://admin-center-service:8080
WORKFLOW_ENGINE_URL=http://workflow-engine-service:8080
DEVELOPER_WORKSTATION_URL=http://developer-workstation-service:8080
USER_PORTAL_URL=http://user-portal-service:8080

# --- CORS ---
CORS_ALLOWED_ORIGINS=https://admin.company.com,https://portal.company.com,https://dev.company.com

# --- Logging (production: minimal) ---
LOG_LEVEL=WARN
LOG_LEVEL_ROOT=WARN
LOG_LEVEL_PLATFORM=INFO
LOG_LEVEL_SQL=ERROR

# --- Cache TTL (longer for performance) ---
CACHE_USER_TTL_MINUTES=60
CACHE_PERMISSION_TTL_MINUTES=120
CACHE_DICTIONARY_TTL_MINUTES=240

# --- Security (strictest) ---
SECURITY_PASSWORD_MIN_LENGTH=12
SECURITY_LOGIN_MAX_FAILED_ATTEMPTS=3
SECURITY_SESSION_TIMEOUT_MINUTES=15

# --- Features ---
SWAGGER_ENABLED=false
FLOWABLE_SCHEMA_UPDATE=false

# --- Connection Pool (production optimized) ---
HIKARI_MAXIMUM_POOL_SIZE=50
HIKARI_MINIMUM_IDLE=10
HIKARI_CONNECTION_TIMEOUT=30000

# --- K8S Server Port (all services use 8080 inside K8S) ---
SERVER_PORT=8080
