-- Purchase Request - Process Definition with Dynamic Form IDs
-- This SQL replaces placeholder form IDs with actual database IDs

-- First, delete existing process definition
DELETE FROM dw_process_definitions WHERE function_unit_id = (SELECT id FROM dw_function_units WHERE code = 'fu-purchase-request');

-- Insert new process definition with placeholder form IDs
INSERT INTO dw_process_definitions (function_unit_id, bpmn_xml)
SELECT f.id, 'PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxicG1uOmRlZmluaXRpb25zIA0KICAgIHhtbG5zOmJwbW49Imh0dHA6Ly93d3cub21nLm9yZy9zcGVjL0JQTU4vMjAxMDA1MjQvTU9ERUwiIA0KICAgIHhtbG5zOmJwbW5kaT0iaHR0cDovL3d3dy5vbWcub3JnL3NwZWMvQlBNTi8yMDEwMDUyNC9ESSINCiAgICB4bWxuczpkYz0iaHR0cDovL3d3dy5vbWcub3JnL3NwZWMvREQvMjAxMDA1MjQvREMiDQogICAgeG1sbnM6ZGk9Imh0dHA6Ly93d3cub21nLm9yZy9zcGVjL0RELzIwMTAwNTI0L0RJIg0KICAgIHhtbG5zOnhzaT0iaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEtaW5zdGFuY2UiDQogICAgeG1sbnM6Y3VzdG9tPSJodHRwOi8vY3VzdG9tLmJwbW4uaW8vc2NoZW1hIg0KICAgIGlkPSJEZWZpbml0aW9uc19QdXJjaGFzZVJlcXVlc3QiIA0KICAgIHRhcmdldE5hbWVzcGFjZT0iaHR0cDovL3dvcmtmbG93LmV4YW1wbGUuY29tL3B1cmNoYXNlLXJlcXVlc3QiPg0KICA8YnBtbjpwcm9jZXNzIGlkPSJQcm9jZXNzX1B1cmNoYXNlUmVxdWVzdCIgbmFtZT0iUHVyY2hhc2UgUmVxdWVzdCBQcm9jZXNzIiBpc0V4ZWN1dGFibGU9InRydWUiPg0KICAgIDxicG1uOmV4dGVuc2lvbkVsZW1lbnRzPg0KICAgICAgPGN1c3RvbTpwcm9wZXJ0aWVzPg0KICAgICAgICA8Y3VzdG9tOnByb3BlcnR5IG5hbWU9Imdsb2JhbEFjdGlvbklkcyIgdmFsdWU9Ils2LDldIi8+DQogICAgICA8L2N1c3RvbTpwcm9wZXJ0aWVzPg0KICAgIDwvYnBtbjpleHRlbnNpb25FbGVtZW50cz4NCiAgICANCiAgICA8YnBtbjpzdGFydEV2ZW50IGlkPSJTdGFydEV2ZW50XzEiIG5hbWU9IlN0YXJ0Ij4NCiAgICAgIDxicG1uOm91dGdvaW5nPkZsb3dfMTwvYnBtbjpvdXRnb2luZz4NCiAgICA8L2JwbW46c3RhcnRFdmVudD4NCiAgICANCiAgICA8YnBtbjp1c2VyVGFzayBpZD0iVGFza19TdWJtaXQiIG5hbWU9IlN1Ym1pdCBSZXF1ZXN0Ij4NCiAgICAgIDxicG1uOmV4dGVuc2lvbkVsZW1lbnRzPg0KICAgICAgICA8Y3VzdG9tOnByb3BlcnRpZXM+DQogICAgICAgICAgPGN1c3RvbTpwcm9wZXJ0eSBuYW1lPSJmb3JtSWQiIHZhbHVlPSJGT1JNX0lEX01BSU4iLz4NCiAgICAgICAgICA8Y3VzdG9tOnByb3BlcnR5IG5hbWU9ImZvcm1OYW1lIiB2YWx1ZT0iUHVyY2hhc2UgUmVxdWVzdCBNYWluIEZvcm0iLz4NCiAgICAgICAgICA8Y3VzdG9tOnByb3BlcnR5IG5hbWU9ImZvcm1SZWFkT25seSIgdmFsdWU9ImZhbHNlIi8+DQogICAgICAgICAgPGN1c3RvbTpwcm9wZXJ0eSBuYW1lPSJhY3Rpb25JZHMiIHZhbHVlPSJbMSw5XSIvPg0KICAgICAgICAgIDxjdXN0b206cHJvcGVydHkgbmFtZT0iYXNzaWduZWVUeXBlIiB2YWx1ZT0iSU5JVElBVE9SIi8+DQogICAgICAgICAgPGN1c3RvbTpwcm9wZXJ0eSBuYW1lPSJhc3NpZ25lZUxhYmVsIiB2YWx1ZT0iSW5pdGlhdG9yIi8+DQogICAgICAgIDwvY3VzdG9tOnByb3BlcnRpZXM+DQogICAgICA8L2JwbW46ZXh0ZW5zaW9uRWxlbWVudHM+DQogICAgICA8YnBtbjppbmNvbWluZz5GbG93XzE8L2JwbW46aW5jb21pbmc+DQogICAgICA8YnBtbjpvdXRnb2luZz5GbG93XzI8L2JwbW46b3V0Z29pbmc+DQogICAgPC9icG1uOnVzZXJUYXNrPg0KICAgIA0KICAgIDxicG1uOnVzZXJUYXNrIGlkPSJUYXNrX0RlcHRSZXZpZXciIG5hbWU9IkRlcGFydG1lbnQgUmV2aWV3Ij4NCiAgICAgIDxicG1uOmV4dGVuc2lvbkVsZW1lbnRzPg0KICAgICAgICA8Y3VzdG9tOnByb3BlcnRpZXM+DQogICAgICAgICAgPGN1c3RvbTpwcm9wZXJ0eSBuYW1lPSJmb3JtSWQiIHZhbHVlPSJGT1JNX0lEX0FQUFJPVkFMIi8+DQogICAgICAgICAgPGN1c3RvbTpwcm9wZXJ0eSBuYW1lPSJmb3JtTmFtZSIgdmFsdWU9IkFwcHJvdmFsIEZvcm0iLz4NCiAgICAgICAgICA8Y3VzdG9tOnByb3BlcnR5IG5hbWU9ImZvcm1SZWFkT25seSIgdmFsdWU9ImZhbHNlIi8+DQogICAgICAgICAgPGN1c3RvbTpwcm9wZXJ0eSBuYW1lPSJhY3Rpb25JZHMiIHZhbHVlPSJbMiwzLDQsNV0iLz4NCiAgICAgICAgICA8Y3VzdG9tOnByb3BlcnR5IG5hbWU9ImFzc2lnbmVlVHlwZSIgdmFsdWU9IkRFUFRfT1RIRVJTIi8+DQogICAgICAgICAgPGN1c3RvbTpwcm9wZXJ0eSBuYW1lPSJhc3NpZ25lZUxhYmVsIiB2YWx1ZT0iRGVwYXJ0bWVudCBPdGhlcnMiLz4NCiAgICAgICAgPC9jdXN0b206cHJvcGVydGllcz4NCiAgICAgIDwvYnBtbjpleHRlbnNpb25FbGVtZW50cz4NCiAgICAgIDxicG1uOmluY29taW5nPkZsb3dfMjwvYnBtbjppbmNvbWluZz4NCiAgICAgIDxicG1uOm91dGdvaW5nPkZsb3dfMzwvYnBtbjpvdXRnb2luZz4NCiAgICA8L2JwbW46dXNlclRhc2s+DQogICAgDQogICAgPGJwbW46dXNlclRhc2sgaWQ9IlRhc2tfTWFuYWdlckFwcHJvdmFsIiBuYW1lPSJNYW5hZ2VyIEFwcHJvdmFsIj4NCiAgICAgIDxicG1uOmV4dGVuc2lvbkVsZW1lbnRzPg0KICAgICAgICA8Y3VzdG9tOnByb3BlcnRpZXM+DQogICAgICAgICAgPGN1c3RvbTpwcm9wZXJ0eSBuYW1lPSJmb3JtSWQiIHZhbHVlPSJGT1JNX0lEX0FQUFJPVkFMIi8+DQogICAgICAgICAgPGN1c3RvbTpwcm9wZXJ0eSBuYW1lPSJmb3JtTmFtZSIgdmFsdWU9IkFwcHJvdmFsIEZvcm0iLz4NCiAgICAgICAgICA8Y3VzdG9tOnByb3BlcnR5IG5hbWU9ImZvcm1SZWFkT25seSIgdmFsdWU9ImZhbHNlIi8+DQogICAgICAgICAgPGN1c3RvbTpwcm9wZXJ0eSBuYW1lPSJhY3Rpb25JZHMiIHZhbHVlPSJbMiwzLDQsNV0iLz4NCiAgICAgICAgICA8Y3VzdG9tOnByb3BlcnR5IG5hbWU9ImFzc2lnbmVlVHlwZSIgdmFsdWU9IkVOVElUWV9NQU5BR0VSIi8+DQogICAgICAgICAgPGN1c3RvbTpwcm9wZXJ0eSBuYW1lPSJhc3NpZ25lZUxhYmVsIiB2YWx1ZT0iRW50aXR5IE1hbmFnZXIiLz4NCiAgICAgICAgPC9jdXN0b206cHJvcGVydGllcz4NCiAgICAgIDwvYnBtbjpleHRlbnNpb25FbGVtZW50cz4NCiAgICAgIDxicG1uOmluY29taW5nPkZsb3dfMzwvYnBtbjppbmNvbWluZz4NCiAgICAgIDxicG1uOm91dGdvaW5nPkZsb3dfNDwvYnBtbjpvdXRnb2luZz4NCiAgICA8L2JwbW46dXNlclRhc2s+DQogICAgDQogICAgPGJwbW46ZXhjbHVzaXZlR2F0ZXdheSBpZD0iR2F0ZXdheV9BbW91bnQiIG5hbWU9IkFtb3VudCBDaGVjayI+DQogICAgICA8YnBtbjppbmNvbWluZz5GbG93XzQ8L2JwbW46aW5jb21pbmc+DQogICAgICA8YnBtbjpvdXRnb2luZz5GbG93XzU8L2JwbW46b3V0Z29pbmc+DQogICAgICA8YnBtbjpvdXRnb2luZz5GbG93XzY8L2JwbW46b3V0Z29pbmc+DQogICAgPC9icG1uOmV4Y2x1c2l2ZUdhdGV3YXk+DQogICAgDQogICAgPGJwbW46dXNlclRhc2sgaWQ9IlRhc2tfRnVuY3Rpb25NYW5hZ2VyQXBwcm92YWwiIG5hbWU9IkZ1bmN0aW9uIE1hbmFnZXIgQXBwcm92YWwiPg0KICAgICAgPGJwbW46ZXh0ZW5zaW9uRWxlbWVudHM+DQogICAgICAgIDxjdXN0b206cHJvcGVydGllcz4NCiAgICAgICAgICA8Y3VzdG9tOnByb3BlcnR5IG5hbWU9ImZvcm1JZCIgdmFsdWU9IkZPUk1fSURfQVBQUk9WQUwiLz4NCiAgICAgICAgICA8Y3VzdG9tOnByb3BlcnR5IG5hbWU9ImZvcm1OYW1lIiB2YWx1ZT0iQXBwcm92YWwgRm9ybSIvPg0KICAgICAgICAgIDxjdXN0b206cHJvcGVydHkgbmFtZT0iZm9ybVJlYWRPbmx5IiB2YWx1ZT0iZmFsc2UiLz4NCiAgICAgICAgICA8Y3VzdG9tOnByb3BlcnR5IG5hbWU9ImFjdGlvbklkcyIgdmFsdWU9IlsyLDMsNCw1XSIvPg0KICAgICAgICAgIDxjdXN0b206cHJvcGVydHkgbmFtZT0iYXNzaWduZWVUeXBlIiB2YWx1ZT0iRlVOQ1RJT05fTUFOQUdFUiIvPg0KICAgICAgICAgIDxjdXN0b206cHJvcGVydHkgbmFtZT0iYXNzaWduZWVMYWJlbCIgdmFsdWU9IkZ1bmN0aW9uIE1hbmFnZXIiLz4NCiAgICAgICAgPC9jdXN0b206cHJvcGVydGllcz4NCiAgICAgIDwvYnBtbjpleHRlbnNpb25FbGVtZW50cz4NCiAgICAgIDxicG1uOmluY29taW5nPkZsb3dfNTwvYnBtbjppbmNvbWluZz4NCiAgICAgIDxicG1uOm91dGdvaW5nPkZsb3dfNzwvYnBtbjpvdXRnb2luZz4NCiAgICA8L2JwbW46dXNlclRhc2s+DQogICAgDQogICAgPGJwbW46dXNlclRhc2sgaWQ9IlRhc2tfUGFyZW50RGVwdFJldmlldyIgbmFtZT0iUGFyZW50IERlcGFydG1lbnQgUmV2aWV3Ij4NCiAgICAgIDxicG1uOmV4dGVuc2lvbkVsZW1lbnRzPg0KICAgICAgICA8Y3VzdG9tOnByb3BlcnRpZXM+DQogICAgICAgICAgPGN1c3RvbTpwcm9wZXJ0eSBuYW1lPSJmb3JtSWQiIHZhbHVlPSJGT1JNX0lEX0FQUFJPVkFMIi8+DQogICAgICAgICAgPGN1c3RvbTpwcm9wZXJ0eSBuYW1lPSJmb3JtTmFtZSIgdmFsdWU9IkFwcHJvdmFsIEZvcm0iLz4NCiAgICAgICAgICA8Y3VzdG9tOnByb3BlcnR5IG5hbWU9ImZvcm1SZWFkT25seSIgdmFsdWU9ImZhbHNlIi8+DQogICAgICAgICAgPGN1c3RvbTpwcm9wZXJ0eSBuYW1lPSJhY3Rpb25JZHMiIHZhbHVlPSJbMiwzLDQsNV0iLz4NCiAgICAgICAgICA8Y3VzdG9tOnByb3BlcnR5IG5hbWU9ImFzc2lnbmVlVHlwZSIgdmFsdWU9IlBBUkVOVF9ERVBUIi8+DQogICAgICAgICAgPGN1c3RvbTpwcm9wZXJ0eSBuYW1lPSJhc3NpZ25lZUxhYmVsIiB2YWx1ZT0iUGFyZW50IERlcGFydG1lbnQiLz4NCiAgICAgICAgPC9jdXN0b206cHJvcGVydGllcz4NCiAgICAgIDwvYnBtbjpleHRlbnNpb25FbGVtZW50cz4NCiAgICAgIDxicG1uOmluY29taW5nPkZsb3dfNzwvYnBtbjppbmNvbWluZz4NCiAgICAgIDxicG1uOm91dGdvaW5nPkZsb3dfODwvYnBtbjpvdXRnb2luZz4NCiAgICA8L2JwbW46dXNlclRhc2s+DQogICAgDQogICAgPGJwbW46dXNlclRhc2sgaWQ9IlRhc2tfRmluYW5jZVJldmlldyIgbmFtZT0iRmluYW5jZSBSZXZpZXciPg0KICAgICAgPGJwbW46ZXh0ZW5zaW9uRWxlbWVudHM+DQogICAgICAgIDxjdXN0b206cHJvcGVydGllcz4NCiAgICAgICAgICA8Y3VzdG9tOnByb3BlcnR5IG5hbWU9ImZvcm1JZCIgdmFsdWU9IkZPUk1fSURfQVBQUk9WQUwiLz4NCiAgICAgICAgICA8Y3VzdG9tOnByb3BlcnR5IG5hbWU9ImZvcm1OYW1lIiB2YWx1ZT0iQXBwcm92YWwgRm9ybSIvPg0KICAgICAgICAgIDxjdXN0b206cHJvcGVydHkgbmFtZT0iZm9ybVJlYWRPbmx5IiB2YWx1ZT0iZmFsc2UiLz4NCiAgICAgICAgICA8Y3VzdG9tOnByb3BlcnR5IG5hbWU9ImFjdGlvbklkcyIgdmFsdWU9IlsyLDMsN10iLz4NCiAgICAgICAgICA8Y3VzdG9tOnByb3BlcnR5IG5hbWU9ImFzc2lnbmVlVHlwZSIgdmFsdWU9IkZJWEVEX0RFUFQiLz4NCiAgICAgICAgICA8Y3VzdG9tOnByb3BlcnR5IG5hbWU9ImFzc2lnbmVlTGFiZWwiIHZhbHVlPSJGaW5hbmNlIERlcGFydG1lbnQiLz4NCiAgICAgICAgICA8Y3VzdG9tOnByb3BlcnR5IG5hbWU9ImFzc2lnbmVlVmFsdWUiIHZhbHVlPSJkZXB0LWZpbmFuY2UtMDAxIi8+DQogICAgICAgIDwvY3VzdG9tOnByb3BlcnRpZXM+DQogICAgICA8L2JwbW46ZXh0ZW5zaW9uRWxlbWVudHM+DQogICAgICA8YnBtbjppbmNvbWluZz5GbG93Xzg8L2JwbW46aW5jb21pbmc+DQogICAgICA8YnBtbjppbmNvbWluZz5GbG93XzY8L2JwbW46aW5jb21pbmc+DQogICAgICA8YnBtbjpvdXRnb2luZz5GbG93Xzk8L2JwbW46b3V0Z29pbmc+DQogICAgPC9icG1uOnVzZXJUYXNrPg0KICAgIA0KICAgIDxicG1uOnVzZXJUYXNrIGlkPSJUYXNrX0NvdW50ZXJzaWduIiBuYW1lPSJNdWx0aS1EZXBhcnRtZW50IENvdW50ZXJzaWduIj4NCiAgICAgIDxicG1uOmV4dGVuc2lvbkVsZW1lbnRzPg0KICAgICAgICA8Y3VzdG9tOnByb3BlcnRpZXM+DQogICAgICAgICAgPGN1c3RvbTpwcm9wZXJ0eSBuYW1lPSJmb3JtSWQiIHZhbHVlPSJGT1JNX0lEX0NPVU5URVJTSUdOIi8+DQogICAgICAgICAgPGN1c3RvbTpwcm9wZXJ0eSBuYW1lPSJmb3JtTmFtZSIgdmFsdWU9IkNvdW50ZXJzaWduIEZvcm0iLz4NCiAgICAgICAgICA8Y3VzdG9tOnByb3BlcnR5IG5hbWU9ImZvcm1SZWFkT25seSIgdmFsdWU9ImZhbHNlIi8+DQogICAgICAgICAgPGN1c3RvbTpwcm9wZXJ0eSBuYW1lPSJhY3Rpb25JZHMiIHZhbHVlPSJbMiwzLDEwXSIvPg0KICAgICAgICAgIDxjdXN0b206cHJvcGVydHkgbmFtZT0iYXNzaWduZWVUeXBlIiB2YWx1ZT0iVklSVFVBTF9HUk9VUCIvPg0KICAgICAgICAgIDxjdXN0b206cHJvcGVydHkgbmFtZT0iYXNzaWduZWVMYWJlbCIgdmFsdWU9IkNvdW50ZXJzaWduIEdyb3VwIi8+DQogICAgICAgICAgPGN1c3RvbTpwcm9wZXJ0eSBuYW1lPSJhc3NpZ25lZVZhbHVlIiB2YWx1ZT0idmctY291bnRlcnNpZ24tMDAxIi8+DQogICAgICAgIDwvY3VzdG9tOnByb3BlcnRpZXM+DQogICAgICA8L2JwbW46ZXh0ZW5zaW9uRWxlbWVudHM+DQogICAgICA8YnBtbjppbmNvbWluZz5GbG93Xzk8L2JwbW46aW5jb21pbmc+DQogICAgICA8YnBtbjpvdXRnb2luZz5GbG93XzEwPC9icG1uOm91dGdvaW5nPg0KICAgIDwvYnBtbjp1c2VyVGFzaz4NCiAgICANCiAgICA8YnBtbjplbmRFdmVudCBpZD0iRW5kRXZlbnRfMSIgbmFtZT0iRW5kIj4NCiAgICAgIDxicG1uOmluY29taW5nPkZsb3dfMTA8L2JwbW46aW5jb21pbmc+DQogICAgPC9icG1uOmVuZEV2ZW50Pg0KICAgIA0KICAgIDxicG1uOnNlcXVlbmNlRmxvdyBpZD0iRmxvd18xIiBzb3VyY2VSZWY9IlN0YXJ0RXZlbnRfMSIgdGFyZ2V0UmVmPSJUYXNrX1N1Ym1pdCIvPg0KICAgIDxicG1uOnNlcXVlbmNlRmxvdyBpZD0iRmxvd18yIiBzb3VyY2VSZWY9IlRhc2tfU3VibWl0IiB0YXJnZXRSZWY9IlRhc2tfRGVwdFJldmlldyIvPg0KICAgIDxicG1uOnNlcXVlbmNlRmxvdyBpZD0iRmxvd18zIiBzb3VyY2VSZWY9IlRhc2tfRGVwdFJldmlldyIgdGFyZ2V0UmVmPSJUYXNrX01hbmFnZXJBcHByb3ZhbCIvPg0KICAgIDxicG1uOnNlcXVlbmNlRmxvdyBpZD0iRmxvd180IiBzb3VyY2VSZWY9IlRhc2tfTWFuYWdlckFwcHJvdmFsIiB0YXJnZXRSZWY9IkdhdGV3YXlfQW1vdW50Ii8+DQogICAgPGJwbW46c2VxdWVuY2VGbG93IGlkPSJGbG93XzUiIG5hbWU9IkFtb3VudCA+PSAxMDAwMCIgc291cmNlUmVmPSJHYXRld2F5X0Ftb3VudCIgdGFyZ2V0UmVmPSJUYXNrX0Z1bmN0aW9uTWFuYWdlckFwcHJvdmFsIj4NCiAgICAgIDxicG1uOmNvbmRpdGlvbkV4cHJlc3Npb24geHNpOnR5cGU9ImJwbW46dEZvcm1hbEV4cHJlc3Npb24iPjwhW0NEQVRBWyR7dG90YWxfYW1vdW50ID49IDEwMDAwfV1dPjwvYnBtbjpjb25kaXRpb25FeHByZXNzaW9uPg0KICAgIDwvYnBtbjpzZXF1ZW5jZUZsb3c+DQogICAgPGJwbW46c2VxdWVuY2VGbG93IGlkPSJGbG93XzYiIG5hbWU9IkFtb3VudCAmbHQ7IDEwMDAwIiBzb3VyY2VSZWY9IkdhdGV3YXlfQW1vdW50IiB0YXJnZXRSZWY9IlRhc2tfRmluYW5jZVJldmlldyI+DQogICAgICA8YnBtbjpjb25kaXRpb25FeHByZXNzaW9uIHhzaTp0eXBlPSJicG1uOnRGb3JtYWxFeHByZXNzaW9uIj48IVtDREFUQVske3RvdGFsX2Ftb3VudCA8IDEwMDAwfV1dPjwvYnBtbjpjb25kaXRpb25FeHByZXNzaW9uPg0KICAgIDwvYnBtbjpzZXF1ZW5jZUZsb3c+DQogICAgPGJwbW46c2VxdWVuY2VGbG93IGlkPSJGbG93XzciIHNvdXJjZVJlZj0iVGFza19GdW5jdGlvbk1hbmFnZXJBcHByb3ZhbCIgdGFyZ2V0UmVmPSJUYXNrX1BhcmVudERlcHRSZXZpZXciLz4NCiAgICA8YnBtbjpzZXF1ZW5jZUZsb3cgaWQ9IkZsb3dfOCIgc291cmNlUmVmPSJUYXNrX1BhcmVudERlcHRSZXZpZXciIHRhcmdldFJlZj0iVGFza19GaW5hbmNlUmV2aWV3Ii8+DQogICAgPGJwbW46c2VxdWVuY2VGbG93IGlkPSJGbG93XzkiIHNvdXJjZVJlZj0iVGFza19GaW5hbmNlUmV2aWV3IiB0YXJnZXRSZWY9IlRhc2tfQ291bnRlcnNpZ24iLz4NCiAgICA8YnBtbjpzZXF1ZW5jZUZsb3cgaWQ9IkZsb3dfMTAiIHNvdXJjZVJlZj0iVGFza19Db3VudGVyc2lnbiIgdGFyZ2V0UmVmPSJFbmRFdmVudF8xIi8+DQogIDwvYnBtbjpwcm9jZXNzPg0KICANCiAgPGJwbW5kaTpCUE1ORGlhZ3JhbSBpZD0iQlBNTkRpYWdyYW1fMSI+DQogICAgPGJwbW5kaTpCUE1OUGxhbmUgaWQ9IkJQTU5QbGFuZV8xIiBicG1uRWxlbWVudD0iUHJvY2Vzc19QdXJjaGFzZVJlcXVlc3QiPg0KICAgICAgPGJwbW5kaTpCUE1OU2hhcGUgaWQ9IlN0YXJ0RXZlbnRfMV9kaSIgYnBtbkVsZW1lbnQ9IlN0YXJ0RXZlbnRfMSI+DQogICAgICAgIDxkYzpCb3VuZHMgeD0iMTAwIiB5PSIyMDAiIHdpZHRoPSIzNiIgaGVpZ2h0PSIzNiIvPg0KICAgICAgPC9icG1uZGk6QlBNTlNoYXBlPg0KICAgICAgPGJwbW5kaTpCUE1OU2hhcGUgaWQ9IlRhc2tfU3VibWl0X2RpIiBicG1uRWxlbWVudD0iVGFza19TdWJtaXQiPg0KICAgICAgICA8ZGM6Qm91bmRzIHg9IjIwMCIgeT0iMTc4IiB3aWR0aD0iMTAwIiBoZWlnaHQ9IjgwIi8+DQogICAgICA8L2JwbW5kaTpCUE1OU2hhcGU+DQogICAgICA8YnBtbmRpOkJQTU5TaGFwZSBpZD0iVGFza19EZXB0UmV2aWV3X2RpIiBicG1uRWxlbWVudD0iVGFza19EZXB0UmV2aWV3Ij4NCiAgICAgICAgPGRjOkJvdW5kcyB4PSIzNjAiIHk9IjE3OCIgd2lkdGg9IjEwMCIgaGVpZ2h0PSI4MCIvPg0KICAgICAgPC9icG1uZGk6QlBNTlNoYXBlPg0KICAgICAgPGJwbW5kaTpCUE1OU2hhcGUgaWQ9IlRhc2tfTWFuYWdlckFwcHJvdmFsX2RpIiBicG1uRWxlbWVudD0iVGFza19NYW5hZ2VyQXBwcm92YWwiPg0KICAgICAgICA8ZGM6Qm91bmRzIHg9IjUyMCIgeT0iMTc4IiB3aWR0aD0iMTAwIiBoZWlnaHQ9IjgwIi8+DQogICAgICA8L2JwbW5kaTpCUE1OU2hhcGU+DQogICAgICA8YnBtbmRpOkJQTU5TaGFwZSBpZD0iR2F0ZXdheV9BbW91bnRfZGkiIGJwbW5FbGVtZW50PSJHYXRld2F5X0Ftb3VudCIgaXNNYXJrZXJWaXNpYmxlPSJ0cnVlIj4NCiAgICAgICAgPGRjOkJvdW5kcyB4PSI2ODAiIHk9IjE5MyIgd2lkdGg9IjUwIiBoZWlnaHQ9IjUwIi8+DQogICAgICA8L2JwbW5kaTpCUE1OU2hhcGU+DQogICAgICA8YnBtbmRpOkJQTU5TaGFwZSBpZD0iVGFza19GdW5jdGlvbk1hbmFnZXJBcHByb3ZhbF9kaSIgYnBtbkVsZW1lbnQ9IlRhc2tfRnVuY3Rpb25NYW5hZ2VyQXBwcm92YWwiPg0KICAgICAgICA8ZGM6Qm91bmRzIHg9IjgwMCIgeT0iODAiIHdpZHRoPSIxMDAiIGhlaWdodD0iODAiLz4NCiAgICAgIDwvYnBtbmRpOkJQTU5TaGFwZT4NCiAgICAgIDxicG1uZGk6QlBNTlNoYXBlIGlkPSJUYXNrX1BhcmVudERlcHRSZXZpZXdfZGkiIGJwbW5FbGVtZW50PSJUYXNrX1BhcmVudERlcHRSZXZpZXciPg0KICAgICAgICA8ZGM6Qm91bmRzIHg9Ijk2MCIgeT0iODAiIHdpZHRoPSIxMDAiIGhlaWdodD0iODAiLz4NCiAgICAgIDwvYnBtbmRpOkJQTU5TaGFwZT4NCiAgICAgIDxicG1uZGk6QlBNTlNoYXBlIGlkPSJUYXNrX0ZpbmFuY2VSZXZpZXdfZGkiIGJwbW5FbGVtZW50PSJUYXNrX0ZpbmFuY2VSZXZpZXciPg0KICAgICAgICA8ZGM6Qm91bmRzIHg9IjExMjAiIHk9IjE3OCIgd2lkdGg9IjEwMCIgaGVpZ2h0PSI4MCIvPg0KICAgICAgPC9icG1uZGk6QlBNTlNoYXBlPg0KICAgICAgPGJwbW5kaTpCUE1OU2hhcGUgaWQ9IlRhc2tfQ291bnRlcnNpZ25fZGkiIGJwbW5FbGVtZW50PSJUYXNrX0NvdW50ZXJzaWduIj4NCiAgICAgICAgPGRjOkJvdW5kcyB4PSIxMjgwIiB5PSIxNzgiIHdpZHRoPSIxMDAiIGhlaWdodD0iODAiLz4NCiAgICAgIDwvYnBtbmRpOkJQTU5TaGFwZT4NCiAgICAgIDxicG1uZGk6QlBNTlNoYXBlIGlkPSJFbmRFdmVudF8xX2RpIiBicG1uRWxlbWVudD0iRW5kRXZlbnRfMSI+DQogICAgICAgIDxkYzpCb3VuZHMgeD0iMTQ0MCIgeT0iMjAwIiB3aWR0aD0iMzYiIGhlaWdodD0iMzYiLz4NCiAgICAgIDwvYnBtbmRpOkJQTU5TaGFwZT4NCiAgICAgIDxicG1uZGk6QlBNTkVkZ2UgaWQ9IkZsb3dfMV9kaSIgYnBtbkVsZW1lbnQ9IkZsb3dfMSI+DQogICAgICAgIDxkaTp3YXlwb2ludCB4PSIxMzYiIHk9IjIxOCIvPg0KICAgICAgICA8ZGk6d2F5cG9pbnQgeD0iMjAwIiB5PSIyMTgiLz4NCiAgICAgIDwvYnBtbmRpOkJQTU5FZGdlPg0KICAgICAgPGJwbW5kaTpCUE1ORWRnZSBpZD0iRmxvd18yX2RpIiBicG1uRWxlbWVudD0iRmxvd18yIj4NCiAgICAgICAgPGRpOndheXBvaW50IHg9IjMwMCIgeT0iMjE4Ii8+DQogICAgICAgIDxkaTp3YXlwb2ludCB4PSIzNjAiIHk9IjIxOCIvPg0KICAgICAgPC9icG1uZGk6QlBNTkVkZ2U+DQogICAgICA8YnBtbmRpOkJQTU5FZGdlIGlkPSJGbG93XzNfZGkiIGJwbW5FbGVtZW50PSJGbG93XzMiPg0KICAgICAgICA8ZGk6d2F5cG9pbnQgeD0iNDYwIiB5PSIyMTgiLz4NCiAgICAgICAgPGRpOndheXBvaW50IHg9IjUyMCIgeT0iMjE4Ii8+DQogICAgICA8L2JwbW5kaTpCUE1ORWRnZT4NCiAgICAgIDxicG1uZGk6QlBNTkVkZ2UgaWQ9IkZsb3dfNF9kaSIgYnBtbkVsZW1lbnQ9IkZsb3dfNCI+DQogICAgICAgIDxkaTp3YXlwb2ludCB4PSI2MjAiIHk9IjIxOCIvPg0KICAgICAgICA8ZGk6d2F5cG9pbnQgeD0iNjgwIiB5PSIyMTgiLz4NCiAgICAgIDwvYnBtbmRpOkJQTU5FZGdlPg0KICAgICAgPGJwbW5kaTpCUE1ORWRnZSBpZD0iRmxvd181X2RpIiBicG1uRWxlbWVudD0iRmxvd181Ij4NCiAgICAgICAgPGRpOndheXBvaW50IHg9IjcwNSIgeT0iMTkzIi8+DQogICAgICAgIDxkaTp3YXlwb2ludCB4PSI3MDUiIHk9IjEyMCIvPg0KICAgICAgICA8ZGk6d2F5cG9pbnQgeD0iODAwIiB5PSIxMjAiLz4NCiAgICAgIDwvYnBtbmRpOkJQTU5FZGdlPg0KICAgICAgPGJwbW5kaTpCUE1ORWRnZSBpZD0iRmxvd182X2RpIiBicG1uRWxlbWVudD0iRmxvd182Ij4NCiAgICAgICAgPGRpOndheXBvaW50IHg9IjczMCIgeT0iMjE4Ii8+DQogICAgICAgIDxkaTp3YXlwb2ludCB4PSIxMTIwIiB5PSIyMTgiLz4NCiAgICAgIDwvYnBtbmRpOkJQTU5FZGdlPg0KICAgICAgPGJwbW5kaTpCUE1ORWRnZSBpZD0iRmxvd183X2RpIiBicG1uRWxlbWVudD0iRmxvd183Ij4NCiAgICAgICAgPGRpOndheXBvaW50IHg9IjkwMCIgeT0iMTIwIi8+DQogICAgICAgIDxkaTp3YXlwb2ludCB4PSI5NjAiIHk9IjEyMCIvPg0KICAgICAgPC9icG1uZGk6QlBNTkVkZ2U+DQogICAgICA8YnBtbmRpOkJQTU5FZGdlIGlkPSJGbG93XzhfZGkiIGJwbW5FbGVtZW50PSJGbG93XzgiPg0KICAgICAgICA8ZGk6d2F5cG9pbnQgeD0iMTA2MCIgeT0iMTIwIi8+DQogICAgICAgIDxkaTp3YXlwb2ludCB4PSIxMDkwIiB5PSIxMjAiLz4NCiAgICAgICAgPGRpOndheXBvaW50IHg9IjEwOTAiIHk9IjIxOCIvPg0KICAgICAgICA8ZGk6d2F5cG9pbnQgeD0iMTEyMCIgeT0iMjE4Ii8+DQogICAgICA8L2JwbW5kaTpCUE1ORWRnZT4NCiAgICAgIDxicG1uZGk6QlBNTkVkZ2UgaWQ9IkZsb3dfOV9kaSIgYnBtbkVsZW1lbnQ9IkZsb3dfOSI+DQogICAgICAgIDxkaTp3YXlwb2ludCB4PSIxMjIwIiB5PSIyMTgiLz4NCiAgICAgICAgPGRpOndheXBvaW50IHg9IjEyODAiIHk9IjIxOCIvPg0KICAgICAgPC9icG1uZGk6QlBNTkVkZ2U+DQogICAgICA8YnBtbmRpOkJQTU5FZGdlIGlkPSJGbG93XzEwX2RpIiBicG1uRWxlbWVudD0iRmxvd18xMCI+DQogICAgICAgIDxkaTp3YXlwb2ludCB4PSIxMzgwIiB5PSIyMTgiLz4NCiAgICAgICAgPGRpOndheXBvaW50IHg9IjE0NDAiIHk9IjIxOCIvPg0KICAgICAgPC9icG1uZGk6QlBNTkVkZ2U+DQogICAgPC9icG1uZGk6QlBNTlBsYW5lPg0KICA8L2JwbW5kaTpCUE1ORGlhZ3JhbT4NCjwvYnBtbjpkZWZpbml0aW9ucz4='
FROM dw_function_units f WHERE f.code = 'fu-purchase-request';

-- Update BPMN XML to replace placeholder form IDs with actual IDs
UPDATE dw_process_definitions 
SET bpmn_xml = REPLACE(
    REPLACE(
        REPLACE(bpmn_xml, 
            'FORM_ID_MAIN', 
            (SELECT id::text FROM dw_form_definitions WHERE form_name = 'Purchase Request Main Form' AND function_unit_id = (SELECT id FROM dw_function_units WHERE code = 'fu-purchase-request'))
        ),
        'FORM_ID_APPROVAL',
        (SELECT id::text FROM dw_form_definitions WHERE form_name = 'Approval Form' AND function_unit_id = (SELECT id FROM dw_function_units WHERE code = 'fu-purchase-request'))
    ),
    'FORM_ID_COUNTERSIGN',
    (SELECT id::text FROM dw_form_definitions WHERE form_name = 'Countersign Form' AND function_unit_id = (SELECT id FROM dw_function_units WHERE code = 'fu-purchase-request'))
)
WHERE function_unit_id = (SELECT id FROM dw_function_units WHERE code = 'fu-purchase-request');