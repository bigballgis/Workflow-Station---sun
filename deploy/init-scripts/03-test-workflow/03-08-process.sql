-- 流程定义 (Process Definition) - 包含完整的bpmndi图形信息
INSERT INTO dw_process_definitions (function_unit_id, bpmn_xml)
SELECT f.id, 'PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGJwbW46ZGVmaW5pdGlvbnMgeG1sbnM6YnBtbj0iaHR0cDovL3d3dy5vbWcub3JnL3NwZWMvQlBNTi8yMDEwMDUyNC9NT0RFTCIgeG1sbnM6YnBtbmRpPSJodHRwOi8vd3d3Lm9tZy5vcmcvc3BlYy9CUE1OLzIwMTAwNTI0L0RJIiB4bWxuczpkYz0iaHR0cDovL3d3dy5vbWcub3JnL3NwZWMvREQvMjAxMDA1MjQvREMiIHhtbG5zOmRpPSJodHRwOi8vd3d3Lm9tZy5vcmcvc3BlYy9ERC8yMDEwMDUyNC9ESSIgaWQ9IkRlZmluaXRpb25zX0xlYXZlUmVxdWVzdCIgdGFyZ2V0TmFtZXNwYWNlPSJodHRwOi8vd29ya2Zsb3cuZXhhbXBsZS5jb20vbGVhdmUiPgogIDxicG1uOnByb2Nlc3MgaWQ9IlByb2Nlc3NfTGVhdmVSZXF1ZXN0IiBuYW1lPSLor7flgYfnlLPor7fmtYHnqIsiIGlzRXhlY3V0YWJsZT0idHJ1ZSI+CiAgICA8YnBtbjpzdGFydEV2ZW50IGlkPSJTdGFydEV2ZW50XzEiIG5hbWU9IuW8gOWniyI+PGJwbW46b3V0Z29pbmc+Rmxvd18xPC9icG1uOm91dGdvaW5nPjwvYnBtbjpzdGFydEV2ZW50PgogICAgPGJwbW46dXNlclRhc2sgaWQ9IlRhc2tfU3VibWl0IiBuYW1lPSLmj5DkuqTnlLPor7ciPjxicG1uOmluY29taW5nPkZsb3dfMTwvYnBtbjppbmNvbWluZz48YnBtbjppbmNvbWluZz5GbG93X1JvbGxiYWNrPC9icG1uOmluY29taW5nPjxicG1uOm91dGdvaW5nPkZsb3dfMjwvYnBtbjpvdXRnb2luZz48L2JwbW46dXNlclRhc2s+CiAgICA8YnBtbjpleGNsdXNpdmVHYXRld2F5IGlkPSJHYXRld2F5X0RheXMiIG5hbWU9Iuivt+WBh+WkqeaVsOWIpOaWrSI+PGJwbW46aW5jb21pbmc+Rmxvd18yPC9icG1uOmluY29taW5nPjxicG1uOm91dGdvaW5nPkZsb3dfU2hvcnQ8L2JwbW46b3V0Z29pbmc+PGJwbW46b3V0Z29pbmc+Rmxvd19Mb25nPC9icG1uOm91dGdvaW5nPjwvYnBtbjpleGNsdXNpdmVHYXRld2F5PgogICAgPGJwbW46dXNlclRhc2sgaWQ9IlRhc2tfTWFuYWdlckFwcHJvdmFsIiBuYW1lPSLnm7TmjqXkuLvnrqHlrqHmibkiPjxicG1uOmluY29taW5nPkZsb3dfU2hvcnQ8L2JwbW46aW5jb21pbmc+PGJwbW46b3V0Z29pbmc+Rmxvd18zPC9icG1uOm91dGdvaW5nPjwvYnBtbjp1c2VyVGFzaz4KICAgIDxicG1uOnVzZXJUYXNrIGlkPSJUYXNrX0RlcHRNYW5hZ2VyQXBwcm92YWwiIG5hbWU9IumDqOmXqOe7j+eQhuWuoeaJuSI+PGJwbW46aW5jb21pbmc+Rmxvd19Mb25nPC9icG1uOmluY29taW5nPjxicG1uOm91dGdvaW5nPkZsb3dfNDwvYnBtbjpvdXRnb2luZz48L2JwbW46dXNlclRhc2s+CiAgICA8YnBtbjpleGNsdXNpdmVHYXRld2F5IGlkPSJHYXRld2F5X1Jlc3VsdCIgbmFtZT0i5a6h5om557uT5p6cIj48YnBtbjppbmNvbWluZz5GbG93XzM8L2JwbW46aW5jb21pbmc+PGJwbW46aW5jb21pbmc+Rmxvd180PC9icG1uOmluY29taW5nPjxicG1uOm91dGdvaW5nPkZsb3dfQXBwcm92ZWQ8L2JwbW46b3V0Z29pbmc+PGJwbW46b3V0Z29pbmc+Rmxvd19SZWplY3RlZDwvYnBtbjpvdXRnb2luZz48YnBtbjpvdXRnb2luZz5GbG93X1JvbGxiYWNrPC9icG1uOm91dGdvaW5nPjwvYnBtbjpleGNsdXNpdmVHYXRld2F5PgogICAgPGJwbW46ZW5kRXZlbnQgaWQ9IkVuZEV2ZW50X0FwcHJvdmVkIiBuYW1lPSLlrqHmibnpgJrov4ciPjxicG1uOmluY29taW5nPkZsb3dfQXBwcm92ZWQ8L2JwbW46aW5jb21pbmc+PC9icG1uOmVuZEV2ZW50PgogICAgPGJwbW46ZW5kRXZlbnQgaWQ9IkVuZEV2ZW50X1JlamVjdGVkIiBuYW1lPSLlrqHmibnmi5Lnu50iPjxicG1uOmluY29taW5nPkZsb3dfUmVqZWN0ZWQ8L2JwbW46aW5jb21pbmc+PC9icG1uOmVuZEV2ZW50PgogICAgPGJwbW46c2VxdWVuY2VGbG93IGlkPSJGbG93XzEiIHNvdXJjZVJlZj0iU3RhcnRFdmVudF8xIiB0YXJnZXRSZWY9IlRhc2tfU3VibWl0Ii8+CiAgICA8YnBtbjpzZXF1ZW5jZUZsb3cgaWQ9IkZsb3dfMiIgc291cmNlUmVmPSJUYXNrX1N1Ym1pdCIgdGFyZ2V0UmVmPSJHYXRld2F5X0RheXMiLz4KICAgIDxicG1uOnNlcXVlbmNlRmxvdyBpZD0iRmxvd19TaG9ydCIgbmFtZT0iJmx0Oz0z5aSpIiBzb3VyY2VSZWY9IkdhdGV3YXlfRGF5cyIgdGFyZ2V0UmVmPSJUYXNrX01hbmFnZXJBcHByb3ZhbCIvPgogICAgPGJwbW46c2VxdWVuY2VGbG93IGlkPSJGbG93X0xvbmciIG5hbWU9IiZndDsz5aSpIiBzb3VyY2VSZWY9IkdhdGV3YXlfRGF5cyIgdGFyZ2V0UmVmPSJUYXNrX0RlcHRNYW5hZ2VyQXBwcm92YWwiLz4KICAgIDxicG1uOnNlcXVlbmNlRmxvdyBpZD0iRmxvd18zIiBzb3VyY2VSZWY9IlRhc2tfTWFuYWdlckFwcHJvdmFsIiB0YXJnZXRSZWY9IkdhdGV3YXlfUmVzdWx0Ii8+CiAgICA8YnBtbjpzZXF1ZW5jZUZsb3cgaWQ9IkZsb3dfNCIgc291cmNlUmVmPSJUYXNrX0RlcHRNYW5hZ2VyQXBwcm92YWwiIHRhcmdldFJlZj0iR2F0ZXdheV9SZXN1bHQiLz4KICAgIDxicG1uOnNlcXVlbmNlRmxvdyBpZD0iRmxvd19BcHByb3ZlZCIgbmFtZT0i6YCa6L+HIiBzb3VyY2VSZWY9IkdhdGV3YXlfUmVzdWx0IiB0YXJnZXRSZWY9IkVuZEV2ZW50X0FwcHJvdmVkIi8+CiAgICA8YnBtbjpzZXF1ZW5jZUZsb3cgaWQ9IkZsb3dfUmVqZWN0ZWQiIG5hbWU9IuaLkue7nSIgc291cmNlUmVmPSJHYXRld2F5X1Jlc3VsdCIgdGFyZ2V0UmVmPSJFbmRFdmVudF9SZWplY3RlZCIvPgogICAgPGJwbW46c2VxdWVuY2VGbG93IGlkPSJGbG93X1JvbGxiYWNrIiBuYW1lPSLlm57pgIAiIHNvdXJjZVJlZj0iR2F0ZXdheV9SZXN1bHQiIHRhcmdldFJlZj0iVGFza19TdWJtaXQiLz4KICA8L2JwbW46cHJvY2Vzcz4KICA8YnBtbmRpOkJQTU5EaWFncmFtIGlkPSJCUE1ORGlhZ3JhbV8xIj4KICAgIDxicG1uZGk6QlBNTlBsYW5lIGlkPSJCUE1OUGxhbmVfMSIgYnBtbkVsZW1lbnQ9IlByb2Nlc3NfTGVhdmVSZXF1ZXN0Ij4KICAgICAgPGJwbW5kaTpCUE1OU2hhcGUgaWQ9IlN0YXJ0RXZlbnRfMV9kaSIgYnBtbkVsZW1lbnQ9IlN0YXJ0RXZlbnRfMSI+PGRjOkJvdW5kcyB4PSIxNTIiIHk9IjE5MiIgd2lkdGg9IjM2IiBoZWlnaHQ9IjM2Ii8+PC9icG1uZGk6QlBNTlNoYXBlPgogICAgICA8YnBtbmRpOkJQTU5TaGFwZSBpZD0iVGFza19TdWJtaXRfZGkiIGJwbW5FbGVtZW50PSJUYXNrX1N1Ym1pdCI+PGRjOkJvdW5kcyB4PSIyNDAiIHk9IjE3MCIgd2lkdGg9IjEwMCIgaGVpZ2h0PSI4MCIvPjwvYnBtbmRpOkJQTU5TaGFwZT4KICAgICAgPGJwbW5kaTpCUE1OU2hhcGUgaWQ9IkdhdGV3YXlfRGF5c19kaSIgYnBtbkVsZW1lbnQ9IkdhdGV3YXlfRGF5cyIgaXNNYXJrZXJWaXNpYmxlPSJ0cnVlIj48ZGM6Qm91bmRzIHg9IjM5NSIgeT0iMTg1IiB3aWR0aD0iNTAiIGhlaWdodD0iNTAiLz48L2JwbW5kaTpCUE1OU2hhcGU+CiAgICAgIDxicG1uZGk6QlBNTlNoYXBlIGlkPSJUYXNrX01hbmFnZXJBcHByb3ZhbF9kaSIgYnBtbkVsZW1lbnQ9IlRhc2tfTWFuYWdlckFwcHJvdmFsIj48ZGM6Qm91bmRzIHg9IjUwMCIgeT0iMTAwIiB3aWR0aD0iMTAwIiBoZWlnaHQ9IjgwIi8+PC9icG1uZGk6QlBNTlNoYXBlPgogICAgICA8YnBtbmRpOkJQTU5TaGFwZSBpZD0iVGFza19EZXB0TWFuYWdlckFwcHJvdmFsX2RpIiBicG1uRWxlbWVudD0iVGFza19EZXB0TWFuYWdlckFwcHJvdmFsIj48ZGM6Qm91bmRzIHg9IjUwMCIgeT0iMjQwIiB3aWR0aD0iMTAwIiBoZWlnaHQ9IjgwIi8+PC9icG1uZGk6QlBNTlNoYXBlPgogICAgICA8YnBtbmRpOkJQTU5TaGFwZSBpZD0iR2F0ZXdheV9SZXN1bHRfZGkiIGJwbW5FbGVtZW50PSJHYXRld2F5X1Jlc3VsdCIgaXNNYXJrZXJWaXNpYmxlPSJ0cnVlIj48ZGM6Qm91bmRzIHg9IjY1NSIgeT0iMTg1IiB3aWR0aD0iNTAiIGhlaWdodD0iNTAiLz48L2JwbW5kaTpCUE1OU2hhcGU+CiAgICAgIDxicG1uZGk6QlBNTlNoYXBlIGlkPSJFbmRFdmVudF9BcHByb3ZlZF9kaSIgYnBtbkVsZW1lbnQ9IkVuZEV2ZW50X0FwcHJvdmVkIj48ZGM6Qm91bmRzIHg9Ijc2MiIgeT0iMTIyIiB3aWR0aD0iMzYiIGhlaWdodD0iMzYiLz48L2JwbW5kaTpCUE1OU2hhcGU+CiAgICAgIDxicG1uZGk6QlBNTlNoYXBlIGlkPSJFbmRFdmVudF9SZWplY3RlZF9kaSIgYnBtbkVsZW1lbnQ9IkVuZEV2ZW50X1JlamVjdGVkIj48ZGM6Qm91bmRzIHg9Ijc2MiIgeT0iMjYyIiB3aWR0aD0iMzYiIGhlaWdodD0iMzYiLz48L2JwbW5kaTpCUE1OU2hhcGU+CiAgICAgIDxicG1uZGk6QlBNTkVkZ2UgaWQ9IkZsb3dfMV9kaSIgYnBtbkVsZW1lbnQ9IkZsb3dfMSI+PGRpOndheXBvaW50IHg9IjE4OCIgeT0iMjEwIi8+PGRpOndheXBvaW50IHg9IjI0MCIgeT0iMjEwIi8+PC9icG1uZGk6QlBNTkVkZ2U+CiAgICAgIDxicG1uZGk6QlBNTkVkZ2UgaWQ9IkZsb3dfMl9kaSIgYnBtbkVsZW1lbnQ9IkZsb3dfMiI+PGRpOndheXBvaW50IHg9IjM0MCIgeT0iMjEwIi8+PGRpOndheXBvaW50IHg9IjM5NSIgeT0iMjEwIi8+PC9icG1uZGk6QlBNTkVkZ2U+CiAgICAgIDxicG1uZGk6QlBNTkVkZ2UgaWQ9IkZsb3dfU2hvcnRfZGkiIGJwbW5FbGVtZW50PSJGbG93X1Nob3J0Ij48ZGk6d2F5cG9pbnQgeD0iNDIwIiB5PSIxODUiLz48ZGk6d2F5cG9pbnQgeD0iNDIwIiB5PSIxNDAiLz48ZGk6d2F5cG9pbnQgeD0iNTAwIiB5PSIxNDAiLz48L2JwbW5kaTpCUE1ORWRnZT4KICAgICAgPGJwbW5kaTpCUE1ORWRnZSBpZD0iRmxvd19Mb25nX2RpIiBicG1uRWxlbWVudD0iRmxvd19Mb25nIj48ZGk6d2F5cG9pbnQgeD0iNDIwIiB5PSIyMzUiLz48ZGk6d2F5cG9pbnQgeD0iNDIwIiB5PSIyODAiLz48ZGk6d2F5cG9pbnQgeD0iNTAwIiB5PSIyODAiLz48L2JwbW5kaTpCUE1ORWRnZT4KICAgICAgPGJwbW5kaTpCUE1ORWRnZSBpZD0iRmxvd18zX2RpIiBicG1uRWxlbWVudD0iRmxvd18zIj48ZGk6d2F5cG9pbnQgeD0iNjAwIiB5PSIxNDAiLz48ZGk6d2F5cG9pbnQgeD0iNjgwIiB5PSIxNDAiLz48ZGk6d2F5cG9pbnQgeD0iNjgwIiB5PSIxODUiLz48L2JwbW5kaTpCUE1ORWRnZT4KICAgICAgPGJwbW5kaTpCUE1ORWRnZSBpZD0iRmxvd180X2RpIiBicG1uRWxlbWVudD0iRmxvd180Ij48ZGk6d2F5cG9pbnQgeD0iNjAwIiB5PSIyODAiLz48ZGk6d2F5cG9pbnQgeD0iNjgwIiB5PSIyODAiLz48ZGk6d2F5cG9pbnQgeD0iNjgwIiB5PSIyMzUiLz48L2JwbW5kaTpCUE1ORWRnZT4KICAgICAgPGJwbW5kaTpCUE1ORWRnZSBpZD0iRmxvd19BcHByb3ZlZF9kaSIgYnBtbkVsZW1lbnQ9IkZsb3dfQXBwcm92ZWQiPjxkaTp3YXlwb2ludCB4PSI3MDUiIHk9IjIxMCIvPjxkaTp3YXlwb2ludCB4PSI3MzQiIHk9IjIxMCIvPjxkaTp3YXlwb2ludCB4PSI3MzQiIHk9IjE0MCIvPjxkaTp3YXlwb2ludCB4PSI3NjIiIHk9IjE0MCIvPjwvYnBtbmRpOkJQTU5FZGdlPgogICAgICA8YnBtbmRpOkJQTU5FZGdlIGlkPSJGbG93X1JlamVjdGVkX2RpIiBicG1uRWxlbWVudD0iRmxvd19SZWplY3RlZCI+PGRpOndheXBvaW50IHg9IjcwNSIgeT0iMjEwIi8+PGRpOndheXBvaW50IHg9IjczNCIgeT0iMjEwIi8+PGRpOndheXBvaW50IHg9IjczNCIgeT0iMjgwIi8+PGRpOndheXBvaW50IHg9Ijc2MiIgeT0iMjgwIi8+PC9icG1uZGk6QlBNTkVkZ2U+CiAgICAgIDxicG1uZGk6QlBNTkVkZ2UgaWQ9IkZsb3dfUm9sbGJhY2tfZGkiIGJwbW5FbGVtZW50PSJGbG93X1JvbGxiYWNrIj48ZGk6d2F5cG9pbnQgeD0iNjgwIiB5PSIyMzUiLz48ZGk6d2F5cG9pbnQgeD0iNjgwIiB5PSIzNTAiLz48ZGk6d2F5cG9pbnQgeD0iMjkwIiB5PSIzNTAiLz48ZGk6d2F5cG9pbnQgeD0iMjkwIiB5PSIyNTAiLz48L2JwbW5kaTpCUE1ORWRnZT4KICAgIDwvYnBtbmRpOkJQTU5QbGFuZT4KICA8L2JwbW5kaTpCUE1ORGlhZ3JhbT4KPC9icG1uOmRlZmluaXRpb25zPg=='
FROM dw_function_units f WHERE f.name = '请假申请';

-- 版本记录 (Version)
INSERT INTO dw_versions (function_unit_id, version_number, change_log, snapshot_data, published_by)
SELECT f.id, '0.1.0', '初始版本', '{"version":"0.1.0","status":"DRAFT"}'::bytea, 'system'
FROM dw_function_units f WHERE f.name = '请假申请';

-- 操作日志 (Operation Log)
INSERT INTO dw_operation_logs (operator, operation_type, target_type, target_id, description, details, ip_address, operation_time)
SELECT 'system', 'CREATE', 'FUNCTION_UNIT', f.id, '创建功能单元：请假申请', '{"name":"请假申请"}', '127.0.0.1', NOW()
FROM dw_function_units f WHERE f.name = '请假申请';
