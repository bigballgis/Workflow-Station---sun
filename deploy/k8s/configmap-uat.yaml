apiVersion: v1
kind: ConfigMap
metadata:
  name: workflow-platform-config
  namespace: workflow-platform-uat
data:
  # Spring Profile
  SPRING_PROFILES_ACTIVE: "uat"
  
  # Server Port (unified to 8080 inside K8S)
  SERVER_PORT: "8080"
  
  # Database Configuration (non-sensitive)
  SPRING_DATASOURCE_URL: "jdbc:postgresql://your-uat-postgres-host:5432/workflow_platform_uat"
  
  # Redis Configuration (non-sensitive)
  SPRING_REDIS_HOST: "your-uat-redis-host"
  SPRING_REDIS_PORT: "6379"
  
  # Kafka Configuration
  SPRING_KAFKA_BOOTSTRAP_SERVERS: "your-uat-kafka-host:9092"
  
  # Service URLs (using K8S Service names)
  ADMIN_CENTER_URL: "http://admin-center-service:8080"
  WORKFLOW_ENGINE_URL: "http://workflow-engine-service:8080"
  DEVELOPER_WORKSTATION_URL: "http://developer-workstation-service:8080"
  USER_PORTAL_URL: "http://user-portal-service:8080"
  API_GATEWAY_URL: "http://api-gateway-service:8080"
  
  # Frontend Nginx proxy backend URLs (K8S internal service names)
  ADMIN_CENTER_BACKEND_URL: "http://admin-center-service:8080"
  USER_PORTAL_BACKEND_URL: "http://user-portal-service:8080"
  DEVELOPER_WORKSTATION_BACKEND_URL: "http://developer-workstation-service:8080"
  WORKFLOW_ENGINE_BACKEND_URL: "http://workflow-engine-service:8080"
  API_GATEWAY_BACKEND_URL: "http://api-gateway-service:8080"
  
  # JWT Configuration (non-sensitive)
  JWT_EXPIRATION: "43200000"
  JWT_REFRESH_EXPIRATION: "259200000"
  
  # Logging
  LOG_LEVEL_ROOT: "INFO"
  LOG_LEVEL_PLATFORM: "INFO"
  LOG_LEVEL_SQL: "WARN"
  
  # Cache Configuration (UAT uses longer cache TTL)
  CACHE_USER_TTL_MINUTES: "45"
  CACHE_PERMISSION_TTL_MINUTES: "90"
  CACHE_DICTIONARY_TTL_MINUTES: "180"
  
  # Security Configuration (UAT uses stricter policies)
  SECURITY_PASSWORD_MIN_LENGTH: "10"
  SECURITY_LOGIN_MAX_FAILED_ATTEMPTS: "3"
  SECURITY_SESSION_TIMEOUT_MINUTES: "30"
  
  # Swagger (disabled in UAT)
  SWAGGER_ENABLED: "false"
  
  # Actuator 配置
  MANAGEMENT_ENDPOINTS_ENABLED: "true"
  ACTUATOR_HEALTH_SHOW_DETAILS: "when_authorized"
  
  # Flowable 配置
  FLOWABLE_SCHEMA_UPDATE: "false"
