apiVersion: v1
kind: ConfigMap
metadata:
  name: workflow-platform-config
  namespace: workflow-platform-sit
data:
  # Spring Profile
  SPRING_PROFILES_ACTIVE: "sit"

  # Server Port (unified to 8080 inside K8S)
  SERVER_PORT: "8080"

  # Database (non-sensitive — credentials in Secret)
  SPRING_DATASOURCE_URL: "jdbc:postgresql://sit-postgres.internal:5432/workflow_platform_sit"

  # Redis (non-sensitive — password in Secret)
  SPRING_REDIS_HOST: "sit-redis.internal"
  SPRING_REDIS_PORT: "6379"

  # Service URLs (K8S Service names)
  ADMIN_CENTER_URL: "http://admin-center-service:8080"
  WORKFLOW_ENGINE_URL: "http://workflow-engine-service:8080"
  DEVELOPER_WORKSTATION_URL: "http://developer-workstation-service:8080"
  USER_PORTAL_URL: "http://user-portal-service:8080"

  # Frontend nginx proxy backend URLs
  ADMIN_CENTER_BACKEND_URL: "http://admin-center-service:8080"
  USER_PORTAL_BACKEND_URL: "http://user-portal-service:8080"
  DEVELOPER_WORKSTATION_BACKEND_URL: "http://developer-workstation-service:8080"

  # JWT (non-sensitive parts)
  JWT_EXPIRATION: "86400000"
  JWT_REFRESH_EXPIRATION: "604800000"

  # Logging
  LOG_LEVEL_ROOT: "INFO"
  LOG_LEVEL_PLATFORM: "INFO"
  LOG_LEVEL_SQL: "WARN"

  # Cache
  CACHE_USER_TTL_MINUTES: "30"
  CACHE_PERMISSION_TTL_MINUTES: "60"
  CACHE_DICTIONARY_TTL_MINUTES: "120"

  # Security
  SECURITY_PASSWORD_MIN_LENGTH: "8"
  SECURITY_LOGIN_MAX_FAILED_ATTEMPTS: "5"
  SECURITY_SESSION_TIMEOUT_MINUTES: "30"

  # Features
  SWAGGER_ENABLED: "true"
  CORS_ALLOWED_ORIGINS: "https://sit-admin.company.com,https://sit-portal.company.com,https://sit-dev.company.com"

  # Flowable
  FLOWABLE_SCHEMA_UPDATE: "true"
