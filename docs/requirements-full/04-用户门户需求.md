# 用户门户需求

## 1. 概述

用户工作流门户是低代码工作流平台面向最终用户的操作界面，提供流程发起、任务处理、工作台管理等核心功能。它是用户与工作流系统交互的主要入口，注重用户体验和操作效率。

### 1.1 设计理念
- **用户友好**：直观易用的界面设计，降低学习成本
- **高效便捷**：快速完成日常工作流操作
- **个性化**：支持个人偏好设置和工作台定制
- **专业体验**：专为PC端办公环境设计的用户界面

### 1.2 核心价值
- **提升工作效率**：简化流程操作，减少重复工作
- **增强协作体验**：便捷的任务分配和协作功能
- **实时信息获取**：及时的任务通知和状态更新
- **数据可视化**：清晰的工作统计和进度展示

## 2. 个人工作台

### 2.0 汇丰主题界面设计

**OA布局设计**：
- 顶部导航栏：汇丰红色背景（#DB0011），高度60px，包含Logo、用户信息、通知中心
- 左侧菜单栏：白色背景，宽度240px，可折叠，汇丰红色激活状态
- 主内容区：白色背景，圆角卡片布局，适当阴影效果
- 底部状态栏：浅灰色背景，显示系统状态和版权信息

**汇丰主题配色方案**：
- 主导航：汇丰红色（#DB0011）背景，白色文字
- 卡片组件：白色背景，浅灰色边框（#E5E5E5），圆角8px
- 数据展示：成功绿色（#00A651），警告橙色（#FF6600），错误深红色（#CC0000）
- 交互元素：汇丰红色主按钮，白色次按钮配红色边框

**现代化字体应用**：
- Dashboard标题：PingFang SC Semibold 28px，深灰色（#333333）
- 卡片标题：PingFang SC Medium 20px，深灰色（#333333）
- 数据标签：PingFang SC Regular 16px，中灰色（#666666）
- 数值显示：PingFang SC Medium 24px，汇丰红色（#DB0011）
- 说明文字：PingFang SC Regular 14px，浅灰色（#999999）

### 2.1 Dashboard概览界面

**核心指标展示**：
- 任务概览：待办任务数、逾期任务数、今日完成数、平均处理时长
- 流程概览：发起的流程数、进行中流程、本月完成数、审批通过率
- 个人绩效：效率评分、质量评分、协作评分、月度排名

**可视化图表**：
- 任务趋势图：近30天任务处理趋势、任务类型分布饼图、处理时长分布柱状图、逾期任务趋势线
- 流程统计图：流程发起量统计、流程完成率分析、流程类型使用频率、审批节点耗时分析

**快捷操作区**：
- 常用流程：收藏的流程模板、最近使用的流程、一键发起按钮、流程使用统计
- 快捷链接：我的待办、我的申请、委托管理、个人设置

### 2.2 个性化设置

**界面定制**：
- 主题设置：浅色/深色主题、主题色彩选择、字体大小调节、布局密度设置
- 工作台布局：组件拖拽排列、组件显示/隐藏、组件大小调整、布局模板保存

**通知偏好**：
- 邮件通知：任务分配、任务逾期、流程完成、系统维护通知开关
- 浏览器通知：任务分配、紧急任务、提及通知开关
- 桌面通知：系统通知推送到桌面，支持免打扰时间设置（22:00-08:00）

**工作偏好**：
- 语言设置：英文/中文简体/中文繁体切换
- 时区设置：本地时区配置
- 日期格式：日期时间显示格式选择
- 分页设置：列表默认显示条数

### 2.3 工作台组件

**可拖拽组件网格**：
- 网格规格：12列网格布局、每行高度60像素、组件间距10像素
- 编辑模式：右下角浮动编辑按钮、组件边框虚线显示、四角调整手柄
- 编辑工具栏：重置布局、添加组件、保存并退出按钮

**任务概览组件**：
- 组件尺寸：默认占据6列宽度、8行高度
- 上半部分：三个指标卡片（紧急任务-红色、高优先级-橙色、普通任务-蓝色）
- 下半部分：最近5条任务列表，显示任务标题、优先级标签、到达时间、处理按钮

**流程统计组件**：
- 组件尺寸：默认占据6列宽度、8行高度
- 上半部分：饼图显示本月流程类型分布，图表高度200像素
- 下半部分：统计摘要（本月发起、平均耗时、完成率）

**快捷操作组件**：
- 组件尺寸：默认占据4列宽度、6行高度
- 操作项网格：2列3行网格，每个操作项包含图标、标签、徽章
- 默认操作：发起流程、我的待办、我的申请、委托管理、权限申请、个人设置

**通知中心组件**：
- 组件尺寸：默认占据8列宽度、6行高度
- 通知列表：显示最近5条通知，包含类型图标、标题、内容、时间
- 通知类型：系统通知（蓝色）、任务通知（绿色）、流程通知（橙色）、安全通知（红色）

## 3. 流程管理

### 3.1 流程发起

**流程分类和导航**：
- 分类体系：按业务领域（人事、财务、采购等）、使用频率（常用、偶用、新增）、权限范围（个人、部门、公司）分类
- 流程搜索：关键词搜索、分类筛选、标签过滤、最近使用排序

**流程发起界面**：
- 页面布局：左侧流程分类导航（宽度240像素）、右侧流程列表和详情区域、顶部搜索筛选工具栏（高度60像素）
- 流程列表：网格布局显示流程卡片，每个卡片包含图标、名称、描述、标签、预计时长、参与人数、操作按钮
- 常用流程：如有收藏流程则显示常用流程区域，网格布局每行最多4个卡片

**流程发起对话框**：
- 对话框规格：宽度为屏幕宽度80%（最大1200像素）、高度自适应（最大屏幕高度90%）、屏幕居中显示
- 流程信息展示：流程大图标（128x128像素）、流程名称描述、分类标签、预计时长、步骤预览
- 表单填写：动态表单支持文本输入、数字输入、日期选择、下拉选择、文件上传、关联数据选择
- 附件上传：拖拽上传区域、文件选择按钮、文件列表显示、支持PDF/Word/Excel/图片/压缩包格式
- 紧急程度：四个单选按钮（普通-灰色、一般-蓝色、紧急-橙色、特急-红色）

### 3.2 流程跟踪

**我的申请**：
- 申请列表：显示流程标题编号、当前状态节点、发起时间、预计完成时间、优先级标识
- 状态筛选：进行中、已完成、已撤回、已拒绝、草稿状态多选筛选
- 流程详情：采用统一的四区域布局（表单数据+实时流程图+流程流转详情+操作按钮），详见3.4节流程详情页面设计

**流程操作**：
- 流程撤回：撤回条件检查、撤回原因填写、影响范围提示、撤回确认
- 流程催办：催办对象选择、催办消息编辑、催办记录查看、催办频率限制

### 3.3 流程统计分析

**个人流程统计**：
- 发起统计：按月份统计发起量、按流程类型统计、完成率分析、平均处理时长
- 参与统计：作为处理人的任务数、作为抄送人的通知数、协作参与度分析、跨部门协作统计

**流程效率分析**：
- 效率指标：流程平均处理时长、按时完成率、流程完成率统计
- 趋势分析：月度处理量趋势、效率变化趋势、瓶颈节点分析

### 3.4 流程详情页面

流程详情页面采用统一的四区域布局设计，适用于新建流程、更新流程和查看流程等所有流程相关操作场景。

#### 3.4.1 页面整体布局

**四区域布局结构**：
- 顶部区域：表单数据区域，占据页面上半部分
- 左下区域：实时流程图区域，占据下半部分左侧
- 右下区域：流程流转详情区域，占据下半部分右侧
- 底部区域：操作按钮区域，固定在页面底部

**布局尺寸规范**：
- 表单区域：占据页面高度的50%，宽度100%
- 流程图区域：占据下半部分的60%宽度，高度为页面剩余高度减去操作按钮区域
- 流转详情区域：占据下半部分的40%宽度，与流程图区域等高
- 操作按钮区域：固定高度80像素，宽度100%，背景色为浅灰色

#### 3.4.2 表单数据区域

**表单显示模式**：
- 新建流程：表单处于编辑模式，所有字段可输入，支持实时验证
- 更新流程：根据当前节点权限，部分字段可编辑，部分字段只读
- 查看流程：表单处于只读模式，显示所有历史数据和当前值

**表单布局设计**：
- 采用响应式栅格布局，支持字段的灵活排列
- 重要字段使用较大的显示区域，次要字段可以并排显示
- 支持字段分组显示，使用卡片容器进行分组
- 必填字段使用红色星号标识，只读字段使用灰色背景

**表单交互功能**：
- 字段联动：支持字段间的显示隐藏、值联动、选项联动
- 实时验证：输入时进行格式验证，失焦时进行业务规则验证
- 自动保存：编辑模式下每30秒自动保存草稿，避免数据丢失
- 变更追踪：记录字段的修改历史，支持查看变更对比

**附件文件管理**：
- 文件上传区域：支持拖拽上传，显示上传进度和文件列表
- 文件预览：图片文件支持缩略图预览，文档文件显示文件图标和名称
- 文件操作：支持文件下载、删除、重命名、添加备注
- 版本管理：同名文件上传时自动创建版本，保留历史版本

#### 3.4.3 实时流程图区域

**流程图显示功能**：
- 基于BPMN.js渲染完整的流程图，支持缩放、平移、适应窗口
- 当前活动节点使用汇丰红色高亮显示，已完成节点使用绿色标识
- 待处理节点使用橙色标识，未到达节点使用灰色显示
- 流程执行路径使用粗线条标识，支持显示条件分支的执行路径

**节点状态标识**：
- 开始节点：绿色圆形，显示流程发起时间
- 用户任务节点：蓝色矩形，显示当前处理人和处理状态
- 系统任务节点：紫色矩形，显示执行状态和执行结果
- 网关节点：黄色菱形，显示条件判断结果
- 结束节点：红色圆形，显示流程结束时间和最终状态

**交互功能**：
- 节点点击：点击节点显示节点详细信息，包括处理人、处理时间、处理意见
- 悬浮提示：鼠标悬浮在节点上显示节点基本信息和状态
- 路径追踪：支持高亮显示从开始到当前节点的完整执行路径
- 全屏查看：支持全屏模式查看流程图，便于查看复杂流程

#### 3.4.4 流程流转详情区域

**流转记录列表**：
- 时间轴布局：按时间顺序显示流程的所有流转记录
- 记录内容：操作时间、操作人、操作类型、处理意见、耗时统计
- 状态标识：使用不同颜色的图标标识不同的操作类型（通过、拒绝、转办等）
- 详情展开：支持展开查看详细的处理意见和附件信息

**处理意见显示**：
- 意见内容：完整显示处理人的意见内容，支持富文本格式
- 意见模板：显示使用的意见模板名称（如有）
- 附件文件：显示处理时上传的附件文件，支持在线预览和下载
- 处理时长：显示任务从到达到处理完成的耗时

**统计信息面板**：
- 流程概况：流程总耗时、当前节点、剩余节点数、参与人数
- 效率统计：平均节点处理时长、最长处理节点、流程完成进度
- 参与人员：显示所有参与过流程的人员头像和角色
- 关键时间：流程发起时间、预计完成时间、实际完成时间

#### 3.4.5 操作按钮区域

**按钮布局设计**：
- 左侧区域：次要操作按钮（保存草稿、重置、返回列表）
- 右侧区域：主要操作按钮（提交、同意、拒绝、转办等）
- 按钮间距：按钮之间保持16像素间距，确保点击区域足够大
- 响应式适配：在较小屏幕上按钮可能换行显示

**按钮状态管理**：
- 权限控制：根据用户权限和流程状态动态显示可用按钮
- 状态反馈：按钮点击后显示加载状态，防止重复提交
- 确认对话框：重要操作（如拒绝、撤回）显示确认对话框
- 快捷键支持：主要操作支持快捷键（如Ctrl+S保存，Ctrl+Enter提交）

**新建流程模式按钮**：
- 保存草稿：将当前表单数据保存为草稿，可稍后继续编辑
- 重置表单：清空所有表单数据，恢复到初始状态
- 提交流程：验证表单数据并正式提交流程，开始流转
- 返回列表：返回到流程列表页面，未保存数据会提示确认

**更新流程模式按钮**：
- 保存修改：保存当前节点的表单修改，不触发流程流转
- 同意/通过：同意当前任务，流程流转到下一节点
- 拒绝/驳回：拒绝当前任务，流程根据配置进行回退或结束
- 转办：将任务转办给其他人处理，转办人成为新的处理人
- 委托：委托其他人代为处理，委托人处理后任务回到委托人
- 回退：将流程回退到指定的前置节点，重新处理
- 撤回：撤回已提交的任务（仅在特定条件下可用）

**查看流程模式按钮**：
- 打印流程：生成流程的打印版本，包含完整的表单数据和流转记录
- 导出PDF：将流程详情导出为PDF文件，便于存档和分享
- 复制流程：基于当前流程创建新的流程实例（如支持）
- 返回列表：返回到相应的流程列表页面

#### 3.4.6 页面适配和优化

**加载性能优化**：
- 分块加载：表单数据、流程图、流转记录分别异步加载
- 缓存策略：流程图和静态数据使用浏览器缓存，减少重复请求
- 懒加载：流转记录支持分页懒加载，避免一次性加载大量数据
- 骨架屏：数据加载时显示骨架屏，提升用户体验

**错误处理机制**：
- 网络异常：网络请求失败时显示友好的错误提示和重试按钮
- 数据异常：数据格式错误时显示具体的错误信息和解决建议
- 权限异常：权限不足时显示权限说明和联系管理员的方式
- 操作异常：操作失败时显示失败原因和可能的解决方案

**用户体验优化**：
- 自动保存：编辑模式下定期自动保存，避免数据丢失
- 操作提示：重要操作前显示确认提示，避免误操作
- 进度指示：长时间操作显示进度条或加载动画
- 快捷操作：提供常用操作的快捷键和右键菜单

## 4. 任务管理

### 4.1 待办任务

**任务列表界面**：
- 列表字段：任务标题（支持点击查看详情）、流程类型图标、发起人信息、任务到达时间、截止时间（逾期高亮）、优先级标识、任务状态
- 排序筛选：按优先级排序、按到达时间排序、按截止时间排序、流程类型筛选、发起人筛选、时间范围筛选

**任务优先级管理**：
- 紧急任务：红色标识（#ff4d4f）、2小时内处理、立即处理描述
- 高优先级：橙色标识（#ff7a45）、1个工作日内处理、优先处理描述
- 普通任务：蓝色标识（#1890ff）、3个工作日内处理、正常处理描述
- 低优先级：绿色标识（#52c41a）、1周内处理、延后处理描述

**批量操作**：
- 批量审批：选择多个同类型任务、统一审批意见、批量通过/拒绝、操作结果反馈
- 批量转办：选择转办对象、转办原因说明、转办权限验证、转办通知发送

### 4.2 任务处理

**任务详情页面**：
任务详情页面采用与流程详情页面相同的四区域布局设计：
- 表单数据区域：显示任务相关的表单数据，根据权限控制编辑/只读模式
- 实时流程图区域：显示BPMN流程图，当前活动节点高亮，流程执行路径标识
- 流程流转详情区域：显示完整的流转记录、处理意见历史、统计信息
- 操作按钮区域：显示当前任务可执行的操作按钮（同意、拒绝、转办等）

**动作执行**：
- 默认动作：同意/通过、拒绝/驳回、转办、委托、回退、撤回
- 自定义动作：业务特定操作、外部系统调用、数据处理动作、通知发送动作
- 动作按钮：不同动作显示不同颜色、动作权限控制、动作执行确认

**附件管理**：
- 文件上传：拖拽上传、多文件选择、文件类型限制、文件大小限制、上传进度显示
- 文件预览：图片在线预览、PDF在线查看、Office文档预览、文本文件查看

### 4.3 任务历史

**处理记录**：
- 历史任务列表：任务完成时间、处理结果、处理耗时、流程最终状态、处理评价
- 统计分析：月度处理量统计、平均处理时长、按时完成率、任务类型分布

**绩效评估**：
- 个人绩效：任务处理效率、质量评分、及时性评分、协作评分
- 绩效趋势：月度绩效变化、同比环比分析、绩效排名、改进建议

## 5. 委托管理

### 5.1 委托设置

**委托规则配置**：
- 委托类型：全部委托（所有任务）、部分委托（按流程类型或条件）、临时委托（指定时间段）、紧急委托（仅紧急任务）
- 委托条件：流程类型筛选、优先级筛选、发起人筛选、金额范围筛选、时间段限制

**委托对象管理**：
- 委托给个人：选择具体用户、检查被委托人权限
- 委托给角色：选择角色、检查角色成员
- 委托给部门：选择部门、检查部门负责人
- 委托规则：最大委托层级2级、循环委托检查、委托审批要求、返岗自动撤销

**委托生效管理**：
- 立即生效：设置后立即生效
- 定时生效：指定开始时间
- 条件生效：满足特定条件时生效
- 手动激活：需要手动激活委托

### 5.2 代理处理

**代理任务标识**：
- 任务列表标识：代理任务特殊图标、原委托人信息显示、代理权限范围提示、代理有效期显示
- 权限限制：只能查看不能修改、可以处理但需要审批、完全代理权限、特定操作限制

**代理操作记录**：
- 操作日志：代理操作时间、代理操作内容、代理决策依据、原委托人确认
- 责任追溯：代理决策责任、委托授权记录、操作审计跟踪、结果通知机制

### 5.3 委托监控

**委托状态监控**：
- 委托生效状态：当前生效的委托、即将到期的委托、已过期的委托、暂停的委托
- 委托使用统计：委托任务处理量、委托效果评估、委托满意度调查、委托优化建议

**委托审计**：
- 委托操作审计：委托人、被委托人、任务ID、操作类型、操作时间、操作结果、操作说明、IP地址、用户代理
- 审计报表：委托使用报表、委托效果分析、委托风险评估

## 6. 权限申请

### 6.1 权限申请流程

**申请类型**：
- 功能权限申请：模块访问权限、功能操作权限、特殊功能权限、临时权限申请
- 数据权限申请：数据查看权限、数据修改权限、数据导出权限、跨部门数据权限

**申请表单**：
- 申请类型：功能权限、数据权限、临时权限下拉选择
- 权限范围：权限树形选择器，根据申请类型动态显示
- 申请理由：多行文本输入，详细说明申请权限的业务需要
- 使用期限：日期范围选择器，设置权限有效期

**审批流程**：
- 自动审批：低风险权限自动通过、临时权限快速审批、预设规则自动处理
- 人工审批：直接上级审批、权限管理员审批、多级审批流程、会签审批机制

### 6.2 权限查看

**当前权限展示**：
- 权限树形结构：按模块分类展示、权限层级关系、权限有效期显示、权限来源说明
- 权限详情：权限名称和描述、授权时间和人员、权限有效期、使用频率统计

**权限使用统计**：
- 使用频率：权限使用次数统计、最后使用时间、月度使用率
- 使用分析：权限使用趋势、权限价值评估、权限优化建议

### 6.3 权限生命周期

**权限到期提醒**：
- 提醒机制：到期前7天提醒、到期前1天提醒、到期当天提醒、到期后权限自动回收
- 续期申请：一键续期申请、续期理由说明、自动续期规则、批量续期处理

**权限回收**：
- 自动回收：到期自动回收、离职自动回收、长期未使用回收、违规使用回收
- 手动回收：管理员主动回收、用户主动放弃、安全事件回收、组织调整回收

## 7. 消息通知

### 7.1 通知中心

**消息分类**：
- 系统通知：系统维护通知、功能更新通知、安全提醒通知、政策变更通知
- 任务通知：新任务分配、任务即将到期、任务已逾期、任务状态变更
- 流程通知：流程审批结果、流程状态变更、流程异常提醒、流程完成通知

**通知展示**：
- 标签页分类：未读消息、所有消息、系统通知三个标签页
- 通知列表：每条通知显示类型图标、标题、内容摘要、时间、已读状态
- 通知操作：标记已读、删除通知、查看详情、批量操作

### 7.2 通知渠道

**站内通知**：
- 实时推送：WebSocket实时推送
- 消息提示：浏览器通知API
- 红点提醒：未读消息数量显示
- 声音提醒：可配置提示音

**邮件通知**：
- 邮件模板：任务分配邮件模板、审批结果邮件模板、系统通知邮件模板、自定义邮件模板
- 发送策略：立即发送、批量发送（每小时汇总）、摘要发送（每日摘要）、紧急单独发送

### 7.3 通知设置

**个人通知偏好**：
- 通知类型开关：任务相关通知、流程相关通知、系统相关通知、社交相关通知
- 通知时间设置：工作时间通知、免打扰时间段、周末通知设置、节假日通知设置

**通知频率控制**：
- 任务分配：立即通知、无批量间隔
- 任务提醒：非立即通知、1小时批量间隔
- 系统维护：立即通知、24小时提前通知
- 每日摘要：启用、18:00发送时间、不包含周末

## 8. 技术架构

### 8.1 前端技术栈

**核心框架**：
- Vue 3.4.0：现代化响应式框架
- Vue Router 4.2.0：单页面应用路由
- Pinia 2.1.0：状态管理
- Element Plus 2.4.0：UI组件库
- TypeScript 5.0.0：类型系统

**专业组件**：
- ECharts 5.4.0：数据可视化
- Form-Create 3.1.0：动态表单引擎，支持60+种丰富组件
- BPMN.js 17.0.0：流程图显示
- Day.js 1.11.0：日期处理

### 9.2 组件架构

**通用组件**：
- AppLayout：应用主布局
- PageHeader：页面头部
- Sidebar：侧边导航
- Breadcrumb：面包屑导航

**业务组件**：
- TaskList：任务列表组件
- ProcessDetail：统一流程详情页面组件（四区域布局）
- ProcessDiagram：实时流程图组件
- ProcessHistory：流程流转详情组件
- FormRenderer：动态表单渲染器
- ActionButtons：操作按钮区域组件
- NotificationCenter：通知中心组件

### 9.3 性能优化

**代码分割**：
- 路由懒加载：按页面分割代码
- 组件懒加载：非关键组件延迟加载
- 第三方库分割：vendor、bpmn、form、table独立打包

**缓存策略**：
- API缓存：用户信息缓存5分钟、数据字典缓存30分钟
- 组件缓存：keep-alive缓存页面组件
- 资源缓存：静态资源长期缓存、版本控制更新

## 10. 非功能需求

### 10.1 性能要求
- 页面加载时间：首屏加载 < 2秒
- 操作响应时间：用户操作响应 < 500ms
- 系统吞吐量：支持100 TPS稳定处理
- 数据加载：列表数据加载 < 1秒

### 10.2 用户体验
- 界面友好性：直观易用的界面设计
- 操作便捷性：减少用户操作步骤
- 错误处理：友好的错误提示和处理
- 帮助支持：完善的帮助文档和引导

### 10.3 兼容性
- 浏览器兼容：Chrome 90+、Firefox 88+、Safari 14+、Edge 90+
- 设备兼容：桌面端PC浏览器
- 分辨率适配：1920x1080、1366x768、375x667等主流分辨率
- 网络适配：支持3G/4G/5G/WiFi等网络环境

---

**文档版本**：v1.0  
**创建日期**：2026年1月2日